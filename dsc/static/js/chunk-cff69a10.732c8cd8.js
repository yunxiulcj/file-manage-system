(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cff69a10"],{"005f":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("el-dialog",{attrs:{visible:t.tempVal,top:"50px",width:"750px"},on:{"update:visible":function(e){t.tempVal=e},close:t.dialogClose}},[n("template",{slot:"title"},[n("div",{staticStyle:{height:"20px","line-height":"20px","border-left":"4px solid #1890ff","padding-left":"10px"}},[t._v(" 添加成员 ")])]),n("div",{staticClass:"tips"},[t._v("添加指定成员（不超过100人）")]),n("div",{staticClass:"contentBox"},[n("div",{staticClass:"treeWrap"},[n("el-tree",{ref:"tree",attrs:{props:t.props,load:t.loadNode,"show-checkbox":"","node-key":"name",lazy:"","empty-text":"暂无数据"},on:{check:t.nodeCheck},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,s=e.data;return n("span",{staticClass:"nodeItem"},[n("i",{class:"user"==s.type?"iconfont icon-yonghutianchong":"group"==s.type?"iconfont icon-huaban":"iconfont icon-department"}),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(i.label))])])}}])})],1),n("div",{staticClass:"seleWrap"},[t._l(t.seleNodeList,(function(e,i){return[n("div",{key:e,staticClass:"seleItem"},[n("i",{staticClass:"iconfont icon-yonghutianchong"}),n("span",[t._v(t._s(e))]),n("i",{staticClass:"el-icon-close",on:{click:function(n){return t.delMember(i,e)}}})])]}))],2)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirm}},[t._v(" 确 定 ")])],1)],2)],1)},s=[],a=(n("a9e3"),n("d81d"),n("b0c0"),n("caad"),n("2532"),n("a434"),n("b8f0")),r={name:"newCc",props:{type:Number,value:Boolean,userList:Array},data:function(){return{tempVal:!1,seleNodeList:[],props:{label:"name",isLeaf:"leaf"}}},watch:{value:{handler:function(t){this.tempVal=t},immediate:!0},userList:{immediate:!0,handler:function(t){this.seleNodeList=t}}},methods:{loadNode:function(t,e){var n=this,i=0==t.level?"":t.data.dn;this.$http("getDepartmentUserTree",{dn:i}).then((function(t){var i=[];t.data&&t.data.length>0&&t.data.map((function(t){i.push({name:t.name,leaf:!t.hasChild,dn:t.dn,parentDn:t.parentDn,type:t.type})})),e(i),n.userList&&(console.log("触发setChecked"),i.map((function(t){n.userList.includes(t.name)&&n.$refs["tree"].setChecked(t.name,!0)})))}))},nodeCheck:function(t,e){var n=this;console.log(t,e,"sdfsd");var i=Object(a["a"])(this.seleNodeList);e.checkedNodes.map((function(t,e){t.leaf&&(n.seleNodeList.includes(t.name)?n.temp.splice(e,1):n.temp.push(t.name))})),this.seleNodeList=i},getDepartmentUserTree:function(t){this.$http("getDepartmentUserTree",{dn:t}).then((function(t){return t.data}))},delMember:function(t,e){this.seleNodeList.splice(t,1),this.$refs["tree"].setChecked(e,!1)},cancel:function(){this.$emit("input",!1)},confirm:function(){this.$emit("input",!1),this.$emit("selectUser",this.seleNodeList)},dialogClose:function(){this.$emit("input",!1)}}},o=r,l=(n("50ee"),n("2877")),c=Object(l["a"])(o,i,s,!1,null,"1244d42c",null);e["a"]=c.exports},1276:function(t,e,n){"use strict";var i=n("2ba4"),s=n("c65b"),a=n("e330"),r=n("d784"),o=n("44e7"),l=n("825a"),c=n("1d80"),d=n("4840"),p=n("8aa5"),u=n("50c4"),f=n("577e"),h=n("dc4a"),m=n("4dae"),v=n("14c3"),g=n("9263"),b=n("9f7f"),y=n("d039"),_=b.UNSUPPORTED_Y,C=4294967295,x=Math.min,I=[].push,L=a(/./.exec),k=a(I),w=a("".slice),N=!y((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));r("split",(function(t,e,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var a=f(c(this)),r=void 0===n?C:n>>>0;if(0===r)return[];if(void 0===t)return[a];if(!o(t))return s(e,a,t,r);var l,d,p,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,b=new RegExp(t.source,h+"g");while(l=s(g,b,a)){if(d=b.lastIndex,d>v&&(k(u,w(a,v,l.index)),l.length>1&&l.index<a.length&&i(I,u,m(l,1)),p=l[0].length,v=d,u.length>=r))break;b.lastIndex===l.index&&b.lastIndex++}return v===a.length?!p&&L(b,"")||k(u,""):k(u,w(a,v)),u.length>r?m(u,0,r):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:s(e,this,t,n)}:e,[function(e,n){var i=c(this),r=void 0==e?void 0:h(e,t);return r?s(r,e,i,n):s(a,f(i),e,n)},function(t,i){var s=l(this),r=f(t),o=n(a,s,r,i,a!==e);if(o.done)return o.value;var c=d(s,RegExp),h=s.unicode,m=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(_?"g":"y"),g=new c(_?"^(?:"+s.source+")":s,m),b=void 0===i?C:i>>>0;if(0===b)return[];if(0===r.length)return null===v(g,r)?[r]:[];var y=0,I=0,L=[];while(I<r.length){g.lastIndex=_?0:I;var N,$=v(g,_?w(r,I):r);if(null===$||(N=x(u(g.lastIndex+(_?I:0)),r.length))===y)I=p(r,I,h);else{if(k(L,w(r,y,I)),L.length===b)return L;for(var O=1;O<=$.length-1;O++)if(k(L,$[O]),L.length===b)return L;I=y=N}}return k(L,w(r,y)),L}]}),!N,_)},1293:function(t,e,n){"use strict";n("f2d1")},2561:function(t,e,n){},3305:function(t,e,n){},"408a":function(t,e,n){var i=n("e330");t.exports=i(1..valueOf)},"50ee":function(t,e,n){"use strict";n("f441")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var i=n("e330"),s=n("1d80"),a=n("577e"),r=n("5899"),o=i("".replace),l="["+r+"]",c=RegExp("^"+l+l+"*"),d=RegExp(l+l+"*$"),p=function(t){return function(e){var n=a(s(e));return 1&t&&(n=o(n,c,"")),2&t&&(n=o(n,d,"")),n}};t.exports={start:p(1),end:p(2),trim:p(3)}},"75ba":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pageBox"},[n("el-header",{staticStyle:{height:"25px","line-height":"25px"}},[n("i",{class:"iconfont icon-"+t.icon}),n("span",{staticClass:"title"},[t._v(t._s(t.title))]),n("div",{staticClass:"headBtn"},[t._t("headBtn")],2)]),n("el-divider"),n("el-container",[t.aside?n("el-aside",{staticStyle:{"border-right":"0.5px solid #d9d9d9"},attrs:{width:t.asideWidth||"185px"}},[t._t("aside")],2):t._e(),n("el-main",[t._t("default")],2)],1)],1)},s=[],a={name:"pageFrame",props:["aside","title","icon","asideWidth"],data:function(){return{}},created:function(){},methods:{}},r=a,o=(n("1293"),n("2877")),l=Object(o["a"])(r,i,s,!1,null,"4bf95040",null);e["a"]=l.exports},8592:function(t,e,n){"use strict";n("3305")},a15b:function(t,e,n){"use strict";var i=n("23e7"),s=n("e330"),a=n("44ad"),r=n("fc6a"),o=n("a640"),l=s([].join),c=a!=Object,d=o("join",",");i({target:"Array",proto:!0,forced:c||!d},{join:function(t){return l(r(this),void 0===t?",":t)}})},a434:function(t,e,n){"use strict";var i=n("23e7"),s=n("da84"),a=n("23cb"),r=n("5926"),o=n("07fa"),l=n("7b0b"),c=n("65f0"),d=n("8418"),p=n("1dde"),u=p("splice"),f=s.TypeError,h=Math.max,m=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var n,i,s,p,u,b,y=l(this),_=o(y),C=a(t,_),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=_-C):(n=x-2,i=m(h(r(e),0),_-C)),_+n-i>v)throw f(g);for(s=c(y,i),p=0;p<i;p++)u=C+p,u in y&&d(s,p,y[u]);if(s.length=i,n<i){for(p=C;p<_-i;p++)u=p+i,b=p+n,u in y?y[b]=y[u]:delete y[b];for(p=_;p>_-i+n;p--)delete y[p-1]}else if(n>i)for(p=_-i;p>C;p--)u=p+i-1,b=p+n-1,u in y?y[b]=y[u]:delete y[b];for(p=0;p<n;p++)y[p+C]=arguments[p+2];return y.length=_-i+n,s}})},a9e3:function(t,e,n){"use strict";var i=n("83ab"),s=n("da84"),a=n("e330"),r=n("94ca"),o=n("6eeb"),l=n("1a2d"),c=n("7156"),d=n("3a9b"),p=n("d9b5"),u=n("c04e"),f=n("d039"),h=n("241c").f,m=n("06cf").f,v=n("9bf2").f,g=n("408a"),b=n("58a8").trim,y="Number",_=s[y],C=_.prototype,x=s.TypeError,I=a("".slice),L=a("".charCodeAt),k=function(t){var e=u(t,"number");return"bigint"==typeof e?e:w(e)},w=function(t){var e,n,i,s,a,r,o,l,c=u(t,"number");if(p(c))throw x("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=b(c),e=L(c,0),43===e||45===e){if(n=L(c,2),88===n||120===n)return NaN}else if(48===e){switch(L(c,1)){case 66:case 98:i=2,s=49;break;case 79:case 111:i=8,s=55;break;default:return+c}for(a=I(c,2),r=a.length,o=0;o<r;o++)if(l=L(a,o),l<48||l>s)return NaN;return parseInt(a,i)}return+c};if(r(y,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var N,$=function(t){var e=arguments.length<1?0:_(k(t)),n=this;return d(C,n)&&f((function(){g(n)}))?c(Object(e),n,$):e},O=i?h(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),E=0;O.length>E;E++)l(_,N=O[E])&&!l($,N)&&v($,N,m(_,N));$.prototype=C,C.constructor=$,o(s,y,$)}},be2c:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{key:t.testKey,staticClass:"itemBox"},t._l(t.strategyList,(function(e,i){return n("div",{key:e.id,staticClass:"strategyWrap"},[n("div",{staticClass:"strategyBox"},[n("div",{staticClass:"topWrap"},[n("div",{staticClass:"strategyName"},[t._v(" "+t._s(e.strategyName)+" ")]),n("div",{staticClass:"operate"},[n("i",{staticClass:"iconfont icon-bianji",attrs:{title:"编辑"},on:{click:function(n){return t.editItem(e)}}}),n("el-dropdown",{on:{command:t.handleCommand,"visible-change":function(n){return t.visibleChange(e.id)}}},[n("span",[n("i",{staticClass:"iconfont icon-gengduo"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"del"}},[t._v("删除")]),n("el-dropdown-item",{attrs:{command:"up",disabled:0==i}},[t._v(" 上移 ")]),n("el-dropdown-item",{attrs:{command:"down",disabled:i==t.strategyList.length-1}},[t._v(" 下移 ")])],1)],1)],1)]),n("div",{staticClass:"contentWrap"},[n("div",{staticClass:"condition"},[n("div",{staticClass:"label"},[t._v("条件")]),n("div",{staticClass:"content"},[n("span",[t._v("应用范围：")]),n("span",[t._v(t._s(e.scope.split(",")[0].substring(3)))])])]),n("div",{staticClass:"approval"},[n("div",{staticClass:"label"},[t._v("审批人")]),n("div",{staticClass:"approvalRound"},t._l(e.approvalList,(function(e,i){return n("div",{key:i,staticClass:"approvalWrap"},[1==e.type?n("div",{staticClass:"superior"},[n("div",{staticClass:"approvalBox"},[t._m(0,!0),n("span",[t._v(t._s(t.levelObj[e.superior.level]))]),n("span",[t._v(" （"+t._s(t.approvalMode[e.superior.approvalType])+"） ")])])]):t._e(),2==e.type?n("div",{staticClass:"member"},[n("div",{staticClass:"content"},[t._l(e.member.userList,(function(e){return[n("div",{key:e.index},[n("div",{staticClass:"memberBox"},[t._m(1,!0),n("span",[t._v(t._s(e.userId))])])])]}))],2),n("div",{staticClass:"memType"},[t._v(" （"+t._s(t.approvalMode[e.member.approvalType])+"） ")])]):t._e(),3==e.type?n("div",{staticClass:"iAm"},[t._m(2,!0)]):t._e()])})),0)])])])])})),0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"iconBox"},[n("i",{staticClass:"iconfont icon-yonghutianchong"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"iconBox"},[n("i",{staticClass:"iconfont icon-yonghutianchong"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"approvalBox"},[n("div",{staticClass:"iconBox"},[n("i",{staticClass:"iconfont icon-yonghutianchong"})]),n("span",[t._v("申请人本人")])])}],a=(n("d81d"),{name:"strategyItem",props:{strategyList:Array},data:function(){return{testKey:0,operateId:0,approvalMode:{1:"会签",2:"或签",3:"依次审批"},levelObj:{1:"直接上级",2:"第二级上级",3:"第三级上级",4:"第四级上级",5:"第五级上级",6:"第六级上级"}}},methods:{handleCommand:function(t){var e=this;switch(t){case"del":this.$http("deleteStrategy",{id:this.operateId}).then((function(t){e.$emit("operation",!0),e.$message.success(t.errMsg)}));break;case"up":case"down":this.$http("upOrDown",{id:this.operateId,isUp:"up"==t}).then((function(t){e.$emit("operation",!0),e.$message.success(t.errMsg)}));break}},visibleChange:function(t){this.operateId=t},editItem:function(t){t.approvalList&&t.approvalList.length>0&&t.approvalList.map((function(t){1==t.type?t.member={approvalType:1,userList:[]}:2==t.type&&(t.superior={levelType:1,level:1,noSuperior:!1,approvalType:1})})),this.$emit("passSignal",!0,t)}}}),r=a,o=(n("8592"),n("2877")),l=Object(o["a"])(r,i,s,!1,null,"42a48bdd",null);e["a"]=l.exports},cb40:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{style:{width:t.width||"360px"},attrs:{size:t.size||"small",clearable:""},on:{clear:t.selectClear},model:{value:t.tempVal,callback:function(e){t.tempVal=e},expression:"tempVal"}},[n("template",{slot:"empty"},[n("div",{staticClass:"goBack",attrs:{size:"mini"},on:{click:function(e){return t.goBack(t.depOU)}}},[t._v("向上一级")]),t.depList.length>0?n("div",{staticClass:"depWrap"},t._l(t.depList,(function(e,i){return n("div",{key:e.dn,ref:"depItem",refInFor:!0,staticClass:"depItem"},[n("i",{staticClass:"el-icon-circle-plus-outline",attrs:{title:"点击获取子部门"},on:{click:function(n){return t.getDepartmentList(e.dn)}}}),n("div",{staticClass:"depName",style:e.style,on:{click:function(e){return t.selectDep(i)}}},[t._v(" "+t._s(e.name)+" ")])])})),0):n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.depLoading,expression:"depLoading"}],staticClass:"noData"},[t._v("暂无数据")])])],2)},s=[],a=n("5530"),r=(n("a15b"),n("a434"),n("ac1f"),n("1276"),n("d3b7"),n("d81d"),n("b0c0"),{name:"scopeSelect",props:["value","setPath","size","width"],data:function(){return{depLoading:!1,tempVal:"",depOU:"",selectInfo:{index:-1,dn:""},selectIndex:-1,depList:[],selectedStyle:{color:"#228be6",fontWeight:"600"},normalStyle:{color:"#495057",fontWeight:"normal"}}},watch:{value:{immediate:!0,handler:function(t){this.tempVal=t}},setPath:{immediate:!0,handler:function(t){var e;t&&(e=t.indexOf("OU=")<0?"":t.split(",").splice(1).join(","),this.getDepartmentList(e))}}},mounted:function(){this.getDepartmentList(this.depOU)},methods:{goBack:function(t){if(t){var e=t.indexOf("OU=");-1!=e?(console.log(t),this.getDepartmentList(t.substring(t.indexOf(",")+1))):this.getDepartmentList("")}else this.$message.warning("已无上级")},getDepartmentList:function(t){var e=this;this.depList=[],this.depLoading=!0,this.depOU=t,this.$http("getDepartmentList",{dn:t}).then((function(n){n.data&&(e.depList=n.data.map((function(n,i){return t==e.selectInfo.dn&&i==e.selectInfo.index?Object(a["a"])(Object(a["a"])({},n),{},{style:e.selectedStyle}):Object(a["a"])(Object(a["a"])({},n),{},{style:e.normalStyle})})))})).finally((function(){e.depLoading=!1}))},selectDep:function(t){var e=this;this.depList.map((function(n,i){i==t?(e.selectInfo.index=t,e.selectInfo.dn=e.depOU,e.$set(n,"style",e.selectedStyle),e.$emit("input",n.name),e.$emit("fullPath",n.dn)):e.$set(n,"style",e.normalStyle)}))},selectClear:function(){this.$set(this.depList[this.selectInfo.index],"style",this.normalStyle),this.$emit("fullPath",""),this.selectInfo.index=-1}}}),o=r,l=(n("d980"),n("2877")),c=Object(l["a"])(o,i,s,!1,null,"4beadafe",null);e["a"]=c.exports},d980:function(t,e,n){"use strict";n("2561")},f2d1:function(t,e,n){},f441:function(t,e,n){}}]);