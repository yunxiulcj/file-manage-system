(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ad4217e"],{"0e09":function(e,t,i){},1276:function(e,t,i){"use strict";var n=i("2ba4"),a=i("c65b"),o=i("e330"),l=i("d784"),s=i("44e7"),r=i("825a"),c=i("1d80"),p=i("4840"),f=i("8aa5"),d=i("50c4"),g=i("577e"),u=i("dc4a"),h=i("4dae"),m=i("14c3"),b=i("9263"),C=i("9f7f"),y=i("d039"),v=C.UNSUPPORTED_Y,w=4294967295,x=Math.min,k=[].push,S=o(/./.exec),D=o(k),_=o("".slice),$=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));l("split",(function(e,t,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var o=g(c(this)),l=void 0===i?w:i>>>0;if(0===l)return[];if(void 0===e)return[o];if(!s(e))return a(t,o,e,l);var r,p,f,d=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,C=new RegExp(e.source,u+"g");while(r=a(b,C,o)){if(p=C.lastIndex,p>m&&(D(d,_(o,m,r.index)),r.length>1&&r.index<o.length&&n(k,d,h(r,1)),f=r[0].length,m=p,d.length>=l))break;C.lastIndex===r.index&&C.lastIndex++}return m===o.length?!f&&S(C,"")||D(d,""):D(d,_(o,m)),d.length>l?h(d,0,l):d}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:a(t,this,e,i)}:t,[function(t,i){var n=c(this),l=void 0==t?void 0:u(t,e);return l?a(l,t,n,i):a(o,g(n),t,i)},function(e,n){var a=r(this),l=g(e),s=i(o,a,l,n,o!==t);if(s.done)return s.value;var c=p(a,RegExp),u=a.unicode,h=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(v?"g":"y"),b=new c(v?"^(?:"+a.source+")":a,h),C=void 0===n?w:n>>>0;if(0===C)return[];if(0===l.length)return null===m(b,l)?[l]:[];var y=0,k=0,S=[];while(k<l.length){b.lastIndex=v?0:k;var $,F=m(b,v?_(l,k):l);if(null===F||($=x(d(b.lastIndex+(v?k:0)),l.length))===y)k=f(l,k,u);else{if(D(S,_(l,y,k)),S.length===C)return S;for(var z=1;z<=F.length-1;z++)if(D(S,F[z]),S.length===C)return S;k=y=$}}return D(S,_(l,y)),S}]}),!$,v)},1293:function(e,t,i){"use strict";i("f2d1")},"190f":function(e,t,i){"use strict";i("0e09")},7512:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("page-frame",{attrs:{title:"我的审批",icon:"myApproval"}},[i("el-form",{attrs:{inline:"",size:"small"}},[i("el-form-item",{attrs:{label:"审批状态"}},[i("el-select",{model:{value:e.tableConfig.condition.applyStatus,callback:function(t){e.$set(e.tableConfig.condition,"applyStatus",t)},expression:"tableConfig.condition.applyStatus"}},e._l(e.stateList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"日期"}},[i("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1),i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入工单号",clear:""},model:{value:e.tableConfig.condition.searchStr,callback:function(t){e.$set(e.tableConfig.condition,"searchStr",t)},expression:"tableConfig.condition.searchStr"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("查询")])],1)],1),i("table-temp",{ref:"table",attrs:{config:e.tableConfig,loading:e.tableLoading}})],1),i("el-dialog",{attrs:{visible:e.MultiFileDialog,width:"60%"},on:{"update:visible":function(t){e.MultiFileDialog=t}}},[i("template",{slot:"title"},[i("div",{staticStyle:{height:"20px","line-height":"20px","border-left":"4px solid #1890ff","padding-left":"10px"}},[e._v(" 文件夹 ")])]),i("table-temp",{attrs:{config:e.MultiFileConfig}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.MultiFileDialog=!1}}},[e._v(" 关 闭 ")])],1)],2),i("el-dialog",{attrs:{visible:e.agreeOrRefuseDialog,width:"500px"},on:{"update:visible":function(t){e.agreeOrRefuseDialog=t}}},[i("template",{slot:"title"},[i("div",{staticStyle:{height:"20px","line-height":"20px","border-left":"4px solid #1890ff","padding-left":"10px"}},[e._v(" 提示 ")])]),i("el-form",{attrs:{size:"small"}},[e.canEdit?i("el-form-item",{attrs:{label:"下载次数"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.editForm.downloadCount,callback:function(t){e.$set(e.editForm,"downloadCount",t)},expression:"editForm.downloadCount"}}),i("span",{staticClass:"unit"},[e._v("单位：天")]),i("el-divider",{attrs:{direction:"vertical"}}),i("span",{staticClass:"tips"},[e._v("注：0表示长期有效")])],1):e._e(),e.canEdit?i("el-form-item",{attrs:{label:"申请有效期"}},[i("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.editForm.downloadExpiredDay,callback:function(t){e.$set(e.editForm,"downloadExpiredDay",t)},expression:"editForm.downloadExpiredDay"}}),i("span",{staticClass:"unit"},[e._v("单位：天")]),i("el-divider",{attrs:{direction:"vertical"}}),i("span",{staticClass:"tips"},[e._v("注：0表示长期有效")])],1):e._e(),i("el-form-item",{attrs:{label:"理由*"}},[i("el-input",{model:{value:e.editForm.comment,callback:function(t){e.$set(e.editForm,"comment",t)},expression:"editForm.comment"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.agreeOrRefuseDialog=!1}}},[e._v(" 取 消 ")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmEdit}},[e._v(" 确 定 ")])],1)],2)],1)},a=[],o=i("75ba"),l=i("8efb"),s=i("c1df"),r=i.n(s),c={name:"myApproval",components:{pageFrame:o["a"],tableTemp:l["a"]},data:function(){var e=this;return{MultiFileDialog:!1,agreeOrRefuseDialog:!1,canEdit:!1,editForm:{applyId:"",applyStatus:1,downloadCount:1,downloadExpiredDay:1,comment:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]},tableLoading:!1,times:[],stateList:[{label:"全部",value:""},{label:"已撤回",value:"1"},{label:"待处理",value:"2"},{label:"审批中",value:"3"},{label:"审批通过",value:"4"},{label:"审批拒绝",value:"5"},{label:"传输异常",value:"6"}],tableConfig:{tableData:[],border:!0,tableSetting:[{prop:"applyId",label:"工单号"},{prop:"fileName",label:"文件名",style:function(e){return e.multiFile?{color:"#1890ff",cursor:"pointer"}:{color:"none"}},click:function(t){t.multiFile&&(e.$set(e.MultiFileConfig,"tableData",t.attachmentList),e.MultiFileDialog=!0)}},{prop:"applyUser",label:"申请人"},{prop:"applyType",label:"行为",formatter:function(e){var t;switch(e.applyType){case 1:t="文件下载申请";break;case 2:t="文件外发申请";break;case 3:t="文件下载申请";break;default:t="-";break}return t}},{prop:"applyTime",label:"申请时间"},{prop:"approvalTime",label:"审批时间"},{prop:"applyStatus",label:"申请结果",style:function(e){var t;switch(e.applyStatus){case 1:t={color:"#fd7e14"};break;case 2:case 3:t={color:"#228be6"};break;case 4:t={color:"#40c057"};break;case 5:t={color:"#f03e3e"};break;default:t={color:"#595959"};break}return t},formatter:function(e){var t;switch(e.applyStatus){case 1:t="已撤回";break;case 2:t="待处理";break;case 3:t="审批中";break;case 4:t="审批通过";break;case 5:t="审批拒绝";break;default:t="-";break}return t}}],map:{data:"data.data",total:"data.totalCount"},condition:{applyStatus:"",startTime:"",endTime:"",searchStr:""},operation:{btns:[{label:"同意",style:{color:"#389e0d"},type:"text",fn:function(t){e.editForm.applyId=t.applyId,e.editForm.applyStatus=1,e.editForm.comment="",e.editForm.downloadCount=t.downloadCount,e.editForm.downloadExpiredDay=t.downloadDay,e.canEdit=t.canEdit,e.agreeOrRefuseDialog=!0},show:function(e){return 2==e.applyStatus||3==e.applyStatus}},{label:"拒绝",style:{color:"#f5222d"},type:"text",fn:function(t){e.editForm.applyId=t.applyId,e.editForm.applyStatus=2,e.editForm.downloadCount=t.downloadCount,e.editForm.downloadExpiredDay=t.downloadDay,e.editForm.comment="",e.canEdit=!1,e.agreeOrRefuseDialog=!0},show:function(e){return 2==e.applyStatus||3==e.applyStatus}},{label:"详情",type:"text",fn:function(t){console.log(t),e.$router.push({name:"approval",query:{accountType:"1",approvalState:t.applyStatus,applyId:t.applyId}})}}]},page:{pageIndex:1,pageSize:10,pageSizes:[10,20,30,40],total:0,map:{index:"page",size:"pageSize"}},fetchUrl:"getApprovalList"},MultiFileConfig:{tableData:[],border:!0,maxHeight:"400px",tableSetting:[{prop:"fileName",label:"文件名"},{prop:"fileSize",label:"文件大小"}]}}},created:function(){this.getDefaultTime()},mounted:function(){this.getData()},methods:{confirmEdit:function(){var e=this,t=1==this.editForm.applyStatus?"agree":"refuse";this.$http(t,this.editForm).then((function(t){e.$message.success(t.errMsg),e.agreeOrRefuseDialog=!1,e.getData()}))},getData:function(){var e=this;this.tableConfig.condition.startTime=this.times[0],this.tableConfig.condition.endTime=this.times[1],this.$nextTick((function(){e.$refs.table.fetch()}))},getDefaultTime:function(){this.times=[r()().subtract(7,"days").format("YYYY-MM-DD HH:mm:ss"),r()().format("YYYY-MM-DD HH:mm:ss")]}}},p=c,f=i("2877"),d=Object(f["a"])(p,n,a,!1,null,"f93c3eb4",null);t["default"]=d.exports},"75ba":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pageBox"},[i("el-header",{staticStyle:{height:"25px","line-height":"25px"}},[i("i",{class:"iconfont icon-"+e.icon}),i("span",{staticClass:"title"},[e._v(e._s(e.title))]),i("div",{staticClass:"headBtn"},[e._t("headBtn")],2)]),i("el-divider"),i("el-container",[e.aside?i("el-aside",{staticStyle:{"border-right":"0.5px solid #d9d9d9"},attrs:{width:e.asideWidth||"185px"}},[e._t("aside")],2):e._e(),i("el-main",[e._t("default")],2)],1)],1)},a=[],o={name:"pageFrame",props:["aside","title","icon","asideWidth"],data:function(){return{}},created:function(){},methods:{}},l=o,s=(i("1293"),i("2877")),r=Object(s["a"])(l,n,a,!1,null,"4bf95040",null);t["a"]=r.exports},"8efb":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"tableTempWrap",staticClass:"table-temp"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.innerLoading,expression:"innerLoading"}],ref:"elTable",staticClass:"farm-table-temp",attrs:{"max-height":e.cloneConfig.maxHeight,loadingText:"正在加载表格数据","empty-text":e.emptyText,data:e.cloneConfig.tableData,"header-cell-style":e.cloneConfig.headerCellStyle,border:e.cloneConfig.border,"row-key":e.cloneConfig.rowKey,lazy:"","default-sort":e.cloneConfig.defaultSort,load:e.cloneConfig.loadFn,stripe:"undefined"==typeof e.cloneConfig.stripe||e.cloneConfig.stripe,size:"small"},on:{"row-click":e.rowClick,"expand-change":e.expandChange,"selection-change":e.handleSelectionChange,"sort-change":e.handleSortChange,"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"cell-click":e.cellClick,toggleRowSelection:e.toggleRowSelection}},[e.cloneConfig.selection?i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}):e._e(),e.cloneConfig.serialNumber?i("el-table-column",{attrs:{type:"index",align:"center",width:"55"}}):e._e(),e.cloneConfig.expand?i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("expand",null,{row:t.row,index:t.$index})]}}],null,!0)}):e._e(),e._l(e.cloneConfig.tableSetting,(function(t,n){return i("el-table-column",{key:n,staticClass:"column",attrs:{label:t.label,prop:t.prop,align:t.align||"center","min-width":t.minWidth||120,width:t.width,fixed:t.fixed,"show-overflow-tooltip":"",filters:t.filters,"filter-method":t.filterMethod,sortable:t.sortable||!1},scopedSlots:e._u([{key:"default",fn:function(a){return[e._t(t.slot,(function(){return[i("span",{directives:[{name:"show",rawName:"v-show",value:"function"===typeof t.show?t.show(a.row):!1!==t.show,expression:"\n              typeof item.show === 'function'\n                ? item.show(scope.row)\n                : item.show === false\n                ? false\n                : true\n            "}],style:t.style?"function"===typeof t.style?t.style(a.row):t.style:{},attrs:{title:t.title},on:{click:function(e){!t.click||("function"===typeof t.click?t.click(a.row):t.click)}}},[e._v(" "+e._s("function"===typeof t.formatter?t.formatter(a.row,a.column,a.row[t.prop],n):a.row[t.prop])+" ")])]}),{row:a.row})]}}],null,!0)})})),e.cloneConfig.operation?i("el-table-column",{attrs:{align:"center",fixed:e.cloneConfig.operation.fixed||"right",label:e.cloneConfig.operation.label||"操作","min-width":e.cloneConfig.operation.minWidth||150,width:e.cloneConfig.operation.width},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("btn",(function(){return e._l(e.cloneConfig.operation.btns,(function(n,a){return i("el-button",{directives:[{name:"show",rawName:"v-show",value:"function"===typeof n.show?n.show(t.row):!1!==n.show,expression:"\n              typeof item.show === 'function'\n                ? item.show(scope.row)\n                : item.show === false\n                ? false\n                : true\n            "}],key:a,attrs:{disabled:!!n.disabled&&("function"===typeof n.disabled?n.disabled(t.row):!1!==n.disabled),size:n.size||"mini",type:n.type||"text"},on:{click:function(e){return n.fn(t.row)}}},[n.href?i("a",{style:"function"===typeof n.style?n.style(t.row):n.style,attrs:{href:n.href}},[e._v(" "+e._s("function"===typeof n.label?n.label(t.row):n.label)+" ")]):i("span",{style:"function"===typeof n.style?n.style(t.row):n.style},[e._v(" "+e._s("function"===typeof n.label?n.label(t.row):n.label)+" ")])])}))}),{row:t.row})]}}],null,!0)}):e._e()],2),e.cloneConfig.page?i("div",{ref:"reportNav",staticClass:"report-nav"},[i("el-pagination",{attrs:{"current-page":e.cloneConfig.page.pageIndex,"page-size":e.cloneConfig.page.pageSize,"page-sizes":e.cloneConfig.page.pageSizes,layout:e.layout,total:e.cloneConfig.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.cloneConfig.page,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.cloneConfig.page,"pageIndex",t)}}})],1):e._e()],1)},a=[],o=i("5530"),l=(i("d81d"),i("d3b7"),i("ac1f"),i("1276"),i("fb6a"),i("b8f0")),s=i("5c96"),r={name:"TableTemp",props:Object(o["a"])({config:{type:Object,require:!0},loading:{type:Boolean,default:!1}},s["Table"].props),watch:{"config.tableData":function(){this.init()}},data:function(){return{sortAble:!1,responseData:null,showSelectList:!1,cloneConfig:{map:{data:"data.items",total:"data.total"},resetIndex:!0},layout:"prev, pager, next, jumper",clientMaxHeight:200,isSizeOrIndexChange:!1,innerLoading:!1}},methods:{handleSortChange:function(e){this.sortAble=!0,this.$emit("sortChange",e)},cellMouseEnter:function(e){this.$emit("cellMouseEnter",e)},cellMouseLeave:function(e){this.$emit("cellMouseLeave",e)},toggleRowSelection:function(e){this.$emit("toggleRowSelection",e)},cellClick:function(e,t,i){this.$emit("cellClick",e,t,i)},getLayout:function(){this.cloneConfig.page&&this.cloneConfig.page.pageSizes&&(this.layout="sizes, "+this.layout),this.cloneConfig.page&&(0===this.cloneConfig.page.total||this.cloneConfig.page.total)&&(this.layout="total, "+this.layout)},handleSelectionChange:function(e){this.$emit("selection-change",e)},handleSizeChange:function(e){this.cloneConfig.page&&(this.cloneConfig.page.pageSize=e,this.cloneConfig.page.pageIndex=1,this.isSizeOrIndexChange=!0),"undefined"!==this.cloneConfig.fetchUrl?this.fetch():this.splitData()},handleCurrentChange:function(e){this.cloneConfig.page&&(this.cloneConfig.page.pageIndex=e,this.isSizeOrIndexChange=!0),"undefined"!==this.cloneConfig.fetchUrl?this.fetch():this.splitData()},fetch:function(e){var t,i,n=this;if(this.cloneConfig.fetchUrl)try{!this.cloneConfig.resetIndex&&this.sortAble||this.resetIndex();var a=Object(o["a"])({},this.cloneConfig.condition);if(this.cloneConfig.page){var l="pageSize",s="pageIndex";this.cloneConfig.page.map&&(l=this.cloneConfig.page.map.size||"pageSize",s=this.cloneConfig.page.map.index||"pageIndex"),a[l]=this.cloneConfig.page.pageSize||15,a[s]=this.cloneConfig.page.pageIndex||1}this.innerLoading=!0,this.$emit("update:loading",!0),void 0!=e&&"get"==e&&(a.methodName=e),this.cloneConfig.map&&this.cloneConfig.map.ContentType?(t=this.cloneConfig.map.ContentType,i=this.$http(this.config.fetchUrl,a,{headers:{"Content-Type":t}})):i=this.$http(this.config.fetchUrl,a),i.then((function(e){n.responseData=e;var t=n.dataMap(e,n.cloneConfig.map.data)||[];if(n.cloneConfig.dataProcess&&(t=n.cloneConfig.dataProcess(t)),n.cloneConfig.tableData=t,n.config.tableData=t,n.config.page&&(0===n.config.page.total||n.config.page.total)){var i=n.dataMap(e,n.cloneConfig.map.total)||0;n.cloneConfig.page&&n.$set(n.cloneConfig.page,"total",i)}}),(function(){n.clearData()})).finally((function(){n.$emit("afterFetch",n.responseData),n.$emit("update:loading",!1),n.innerLoading=!1})),this.sortAble=!1}catch(r){this.innerLoading=!1,this.$emit("update:loading",!1),console.log("%c%s","color: red",r)}else console.log("%c没有fetchUrl，请检查","color: red")},clearData:function(){this.cloneConfig.tableData=[],this.cloneConfig.page&&(this.cloneConfig.page.pageIndex=1)&&(this.cloneConfig.page.total=0)},dataMap:function(e,t){try{var i=t.split("."),n=Object(l["a"])(e);while(i.length>0)n=n[i.shift()];return n}catch(a){console.log("数据映射出错%c%s","color: red",a)}},rowClick:function(e,t,i){this.$emit("row-click",e,t,i)},expandChange:function(e,t){this.$emit("expand-change",e,t)},resetIndex:function(){this.cloneConfig.page&&!this.isSizeOrIndexChange?(this.$set(this.cloneConfig.page,"pageIndex",1),this.isSizeOrIndexChange=!1):this.isSizeOrIndexChange=!1},getMaxHeight:function(){var e=this.$refs.tableTempWrap,t=this.$refs.reportNav;this.clientMaxHeight=e.clientHeight-(t?t.offsetHeight:0)},splitData:function(){var e=this.cloneConfig.page&&this.cloneConfig.page.pageIndex||1,t=this.cloneConfig.page&&this.cloneConfig.page.pageSize||15,i=this.config.tableData.length>t?t:this.config.tableData.length;this.cloneConfig.tableData=this.config.tableData.slice((e-1)*t,(e-1)*t+i),this.config.page&&(this.cloneConfig.page.total=this.config.tableData.length)},init:function(){"undefined"===typeof this.config.fetchUrl&&this.config.page?(this.cloneConfig=Object(l["a"])(this.config),this.splitData()):this.cloneConfig=Object(l["b"])(this.config,this.cloneConfig),this.loading&&(this.innerLoading=this.loading)}},created:function(){this.init(),this.getLayout()},mounted:function(){}},c=r,p=(i("190f"),i("2877")),f=Object(p["a"])(c,n,a,!1,null,"7fae086a",null);t["a"]=f.exports},f2d1:function(e,t,i){}}]);