(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ea8d074"],{"0e09":function(e,t,n){},1276:function(e,t,n){"use strict";var i=n("2ba4"),o=n("c65b"),a=n("e330"),l=n("d784"),s=n("44e7"),c=n("825a"),r=n("1d80"),f=n("4840"),g=n("8aa5"),h=n("50c4"),d=n("577e"),p=n("dc4a"),u=n("4dae"),m=n("14c3"),C=n("9263"),b=n("9f7f"),w=n("d039"),v=b.UNSUPPORTED_Y,x=4294967295,y=Math.min,S=[].push,z=a(/./.exec),k=a(S),I=a("".slice),$=!w((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));l("split",(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=d(r(this)),l=void 0===n?x:n>>>0;if(0===l)return[];if(void 0===e)return[a];if(!s(e))return o(t,a,e,l);var c,f,g,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,b=new RegExp(e.source,p+"g");while(c=o(C,b,a)){if(f=b.lastIndex,f>m&&(k(h,I(a,m,c.index)),c.length>1&&c.index<a.length&&i(S,h,u(c,1)),g=c[0].length,m=f,h.length>=l))break;b.lastIndex===c.index&&b.lastIndex++}return m===a.length?!g&&z(b,"")||k(h,""):k(h,I(a,m)),h.length>l?u(h,0,l):h}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:o(t,this,e,n)}:t,[function(t,n){var i=r(this),l=void 0==t?void 0:p(t,e);return l?o(l,t,i,n):o(a,d(i),t,n)},function(e,i){var o=c(this),l=d(e),s=n(a,o,l,i,a!==t);if(s.done)return s.value;var r=f(o,RegExp),p=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"g":"y"),C=new r(v?"^(?:"+o.source+")":o,u),b=void 0===i?x:i>>>0;if(0===b)return[];if(0===l.length)return null===m(C,l)?[l]:[];var w=0,S=0,z=[];while(S<l.length){C.lastIndex=v?0:S;var $,D=m(C,v?I(l,S):l);if(null===D||($=y(h(C.lastIndex+(v?S:0)),l.length))===w)S=g(l,S,p);else{if(k(z,I(l,w,S)),z.length===b)return z;for(var _=1;_<=D.length-1;_++)if(k(z,D[_]),z.length===b)return z;S=w=$}}return k(z,I(l,w)),z}]}),!$,v)},"190f":function(e,t,n){"use strict";n("0e09")},"370b":function(e,t,n){"use strict";n("86fd")},"6bd9":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticClass:"contentBox"},[n("header",[n("div",{staticClass:"headLeft"},[n("el-button",{attrs:{size:"mini",type:"primary",loading:e.downloading},on:{click:function(t){return e.downloadFile(e.selectData,1)}}},[n("i",{staticClass:"iconfont icon-xiazai"}),e._v(" 下载 ")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.selectData.length>0,expression:"selectData.length > 0"}],attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(t){return e.delFile(e.selectData)}}},[n("i",{staticClass:"iconfont icon-delete"}),e._v(" 删除 ")])],1),n("div",{staticClass:"headRight"},[n("el-input",{staticStyle:{width:"220px","margin-right":"10px"},attrs:{placeholder:"请输入文件名","suffix-icon":"el-icon-search",size:"small"},model:{value:e.tableConfig.condition.fileName,callback:function(t){e.$set(e.tableConfig.condition,"fileName",t)},expression:"tableConfig.condition.fileName"}}),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getData}},[e._v(" 查询 ")])],1)]),n("div",{staticClass:"title"},[e._v("文件中转站")]),n("div",{staticClass:"tableWrap"},[n("table-temp",{ref:"table",attrs:{config:e.tableConfig,loading:e.tableLoading},on:{"selection-change":e.handleSelectionChange,cellMouseEnter:e.cellMouseEnter,cellMouseLeave:e.cellMouseLeave},scopedSlots:e._u([{key:"file",fn:function(t){return[n("div",{staticClass:"fileWrap"},[n("div",{staticClass:"fileIcon",style:{background:"url("+e.fileIcon+")",backgroundSize:"100% 100%"}}),n("div",{staticClass:"fileName"},[n("span",{attrs:{title:t.row.fileName}},[e._v(" "+e._s(t.row.fileName)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.row.showOperate,expression:"scope.row.showOperate"}],staticClass:"operate"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!t.row.isFolder,expression:"!scope.row.isFolder"},{name:"loading",rawName:"v-loading",value:t.row.loading,expression:"scope.row.loading"}],staticClass:"iconfont icon-xiazai",attrs:{title:"下载","element-loading-spinner":"el-icon-loading","element-loading-custom-class":"loadingStyle"},on:{click:function(n){return n.stopPropagation(),e.downloadFile(t.row,2)}}}),n("i",{staticClass:"iconfont icon-trash",attrs:{title:"删除"},on:{click:function(n){return n.stopPropagation(),e.delFile([t.row])}}})])])]}}])})],1)])])},o=[],a=(n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("8efb")),l=n("b8f0"),s={name:"transferStop",components:{tableTemp:a["a"]},data:function(){return{fileIcon:n("f3d3"),searchName:"",selectData:[],downloading:!1,tableLoading:!1,tableConfig:{tableData:[],selection:!0,maxHeight:"10000px",stripe:!1,border:!1,headerCellStyle:{background:"#f7f9fd",height:"35px",lineHeight:"35px",fontSize:"15px"},tableSetting:[{prop:"fileName",label:"文件名",align:"left",slot:"file",minWidth:"300px"},{prop:"downloadCount",label:"下载次数",formatter:function(e){return e.countUnlimited?"无限":e.downloadCount}},{prop:"fileSize",label:"大小",formatter:function(e){return Object(l["d"])(e.fileSize)}},{prop:"applyTime",label:"申请日期"},{prop:"expiredTime",label:"失效时间",formatter:function(e){return e.dayUnlimited?"永久":e.isInvaild?"已失效":e.expiredTime}}],map:{data:"data.data",total:"data.totalCount"},condition:{fileName:""},page:{pageIndex:1,pageSize:10,pageSizes:[10,20,30,40],total:0,map:{index:"page",size:"pageSize"}},fetchUrl:"getTransferCenterFileList"},baseUrl:""}},created:function(){this.baseUrl=this.$store.getters.symSetting.uploadUrl,console.log(this.baseUrl)},mounted:function(){this.tableConfig.maxHeight=document.body.clientHeight-260+"px",this.getData()},methods:{getData:function(){this.$refs.table.fetch()},downloadFile:function(e,t){var n=this;1==t?e.map((function(t){n.$http("download",{path:"/"+t.fileName,fileName:t.fileName,fileId:t.fileId}).then((function(t){var n=document.createElement("a"),i=new Blob(t);n.href=URL.createObjectURL(i),n.download=e.fileName,n.click()}))})):(this.$set(e,"loading",!0),this.$http("download",{path:"/"+e.fileName,fileName:e.fileName,fileId:e.fileId}).then((function(t){var n=document.createElement("a"),i=new Blob(t);n.href=URL.createObjectURL(i),n.download=e.fileName,n.click()})).finally((function(){n.$set(e,"loading",!1)})))},delFile:function(e){var t=this,n=e.map((function(e){return e.fileId}));this.$confirm("删除后不可恢复，是否删除所选文件？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.$http("deteleTransferCenterFile",{fileIdList:n}).then((function(e){t.$message.success(e.errMsg),t.getData()}))}))},handleSelectionChange:function(e){this.selectData=e},cellMouseEnter:function(e){this.$set(e,"showOperate",!0)},cellMouseLeave:function(e){this.$set(e,"showOperate",!1)}}},c=s,r=(n("370b"),n("2877")),f=Object(r["a"])(c,i,o,!1,null,"5253e111",null);t["default"]=f.exports},"86fd":function(e,t,n){},"8efb":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"tableTempWrap",staticClass:"table-temp"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.innerLoading,expression:"innerLoading"}],ref:"elTable",staticClass:"farm-table-temp",attrs:{"max-height":e.cloneConfig.maxHeight,loadingText:"正在加载表格数据","empty-text":e.emptyText,data:e.cloneConfig.tableData,"header-cell-style":e.cloneConfig.headerCellStyle,border:e.cloneConfig.border,"row-key":e.cloneConfig.rowKey,lazy:"","default-sort":e.cloneConfig.defaultSort,load:e.cloneConfig.loadFn,stripe:"undefined"==typeof e.cloneConfig.stripe||e.cloneConfig.stripe,size:"small"},on:{"row-click":e.rowClick,"expand-change":e.expandChange,"selection-change":e.handleSelectionChange,"sort-change":e.handleSortChange,"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"cell-click":e.cellClick,toggleRowSelection:e.toggleRowSelection}},[e.cloneConfig.selection?n("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}):e._e(),e.cloneConfig.serialNumber?n("el-table-column",{attrs:{type:"index",align:"center",width:"55"}}):e._e(),e.cloneConfig.expand?n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("expand",null,{row:t.row,index:t.$index})]}}],null,!0)}):e._e(),e._l(e.cloneConfig.tableSetting,(function(t,i){return n("el-table-column",{key:i,staticClass:"column",attrs:{label:t.label,prop:t.prop,align:t.align||"center","min-width":t.minWidth||120,width:t.width,fixed:t.fixed,"show-overflow-tooltip":"",filters:t.filters,"filter-method":t.filterMethod,sortable:t.sortable||!1},scopedSlots:e._u([{key:"default",fn:function(o){return[e._t(t.slot,(function(){return[n("span",{directives:[{name:"show",rawName:"v-show",value:"function"===typeof t.show?t.show(o.row):!1!==t.show,expression:"\n              typeof item.show === 'function'\n                ? item.show(scope.row)\n                : item.show === false\n                ? false\n                : true\n            "}],style:t.style?"function"===typeof t.style?t.style(o.row):t.style:{},attrs:{title:t.title},on:{click:function(e){!t.click||("function"===typeof t.click?t.click(o.row):t.click)}}},[e._v(" "+e._s("function"===typeof t.formatter?t.formatter(o.row,o.column,o.row[t.prop],i):o.row[t.prop])+" ")])]}),{row:o.row})]}}],null,!0)})})),e.cloneConfig.operation?n("el-table-column",{attrs:{align:"center",fixed:e.cloneConfig.operation.fixed||"right",label:e.cloneConfig.operation.label||"操作","min-width":e.cloneConfig.operation.minWidth||150,width:e.cloneConfig.operation.width},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("btn",(function(){return e._l(e.cloneConfig.operation.btns,(function(i,o){return n("el-button",{directives:[{name:"show",rawName:"v-show",value:"function"===typeof i.show?i.show(t.row):!1!==i.show,expression:"\n              typeof item.show === 'function'\n                ? item.show(scope.row)\n                : item.show === false\n                ? false\n                : true\n            "}],key:o,attrs:{disabled:!!i.disabled&&("function"===typeof i.disabled?i.disabled(t.row):!1!==i.disabled),size:i.size||"mini",type:i.type||"text"},on:{click:function(e){return i.fn(t.row)}}},[i.href?n("a",{style:"function"===typeof i.style?i.style(t.row):i.style,attrs:{href:i.href}},[e._v(" "+e._s("function"===typeof i.label?i.label(t.row):i.label)+" ")]):n("span",{style:"function"===typeof i.style?i.style(t.row):i.style},[e._v(" "+e._s("function"===typeof i.label?i.label(t.row):i.label)+" ")])])}))}),{row:t.row})]}}],null,!0)}):e._e()],2),e.cloneConfig.page?n("div",{ref:"reportNav",staticClass:"report-nav"},[n("el-pagination",{attrs:{"current-page":e.cloneConfig.page.pageIndex,"page-size":e.cloneConfig.page.pageSize,"page-sizes":e.cloneConfig.page.pageSizes,layout:e.layout,total:e.cloneConfig.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.cloneConfig.page,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.cloneConfig.page,"pageIndex",t)}}})],1):e._e()],1)},o=[],a=n("5530"),l=(n("d81d"),n("d3b7"),n("ac1f"),n("1276"),n("fb6a"),n("b8f0")),s=n("5c96"),c={name:"TableTemp",props:Object(a["a"])({config:{type:Object,require:!0},loading:{type:Boolean,default:!1}},s["Table"].props),watch:{"config.tableData":function(){this.init()}},data:function(){return{sortAble:!1,responseData:null,showSelectList:!1,cloneConfig:{map:{data:"data.items",total:"data.total"},resetIndex:!0},layout:"prev, pager, next, jumper",clientMaxHeight:200,isSizeOrIndexChange:!1,innerLoading:!1}},methods:{handleSortChange:function(e){this.sortAble=!0,this.$emit("sortChange",e)},cellMouseEnter:function(e){this.$emit("cellMouseEnter",e)},cellMouseLeave:function(e){this.$emit("cellMouseLeave",e)},toggleRowSelection:function(e){this.$emit("toggleRowSelection",e)},cellClick:function(e,t,n){this.$emit("cellClick",e,t,n)},getLayout:function(){this.cloneConfig.page&&this.cloneConfig.page.pageSizes&&(this.layout="sizes, "+this.layout),this.cloneConfig.page&&(0===this.cloneConfig.page.total||this.cloneConfig.page.total)&&(this.layout="total, "+this.layout)},handleSelectionChange:function(e){this.$emit("selection-change",e)},handleSizeChange:function(e){this.cloneConfig.page&&(this.cloneConfig.page.pageSize=e,this.cloneConfig.page.pageIndex=1,this.isSizeOrIndexChange=!0),"undefined"!==this.cloneConfig.fetchUrl?this.fetch():this.splitData()},handleCurrentChange:function(e){this.cloneConfig.page&&(this.cloneConfig.page.pageIndex=e,this.isSizeOrIndexChange=!0),"undefined"!==this.cloneConfig.fetchUrl?this.fetch():this.splitData()},fetch:function(e){var t,n,i=this;if(this.cloneConfig.fetchUrl)try{!this.cloneConfig.resetIndex&&this.sortAble||this.resetIndex();var o=Object(a["a"])({},this.cloneConfig.condition);if(this.cloneConfig.page){var l="pageSize",s="pageIndex";this.cloneConfig.page.map&&(l=this.cloneConfig.page.map.size||"pageSize",s=this.cloneConfig.page.map.index||"pageIndex"),o[l]=this.cloneConfig.page.pageSize||15,o[s]=this.cloneConfig.page.pageIndex||1}this.innerLoading=!0,this.$emit("update:loading",!0),void 0!=e&&"get"==e&&(o.methodName=e),this.cloneConfig.map&&this.cloneConfig.map.ContentType?(t=this.cloneConfig.map.ContentType,n=this.$http(this.config.fetchUrl,o,{headers:{"Content-Type":t}})):n=this.$http(this.config.fetchUrl,o),n.then((function(e){i.responseData=e;var t=i.dataMap(e,i.cloneConfig.map.data)||[];if(i.cloneConfig.dataProcess&&(t=i.cloneConfig.dataProcess(t)),i.cloneConfig.tableData=t,i.config.tableData=t,i.config.page&&(0===i.config.page.total||i.config.page.total)){var n=i.dataMap(e,i.cloneConfig.map.total)||0;i.cloneConfig.page&&i.$set(i.cloneConfig.page,"total",n)}}),(function(){i.clearData()})).finally((function(){i.$emit("afterFetch",i.responseData),i.$emit("update:loading",!1),i.innerLoading=!1})),this.sortAble=!1}catch(c){this.innerLoading=!1,this.$emit("update:loading",!1),console.log("%c%s","color: red",c)}else console.log("%c没有fetchUrl，请检查","color: red")},clearData:function(){this.cloneConfig.tableData=[],this.cloneConfig.page&&(this.cloneConfig.page.pageIndex=1)&&(this.cloneConfig.page.total=0)},dataMap:function(e,t){try{var n=t.split("."),i=Object(l["a"])(e);while(n.length>0)i=i[n.shift()];return i}catch(o){console.log("数据映射出错%c%s","color: red",o)}},rowClick:function(e,t,n){this.$emit("row-click",e,t,n)},expandChange:function(e,t){this.$emit("expand-change",e,t)},resetIndex:function(){this.cloneConfig.page&&!this.isSizeOrIndexChange?(this.$set(this.cloneConfig.page,"pageIndex",1),this.isSizeOrIndexChange=!1):this.isSizeOrIndexChange=!1},getMaxHeight:function(){var e=this.$refs.tableTempWrap,t=this.$refs.reportNav;this.clientMaxHeight=e.clientHeight-(t?t.offsetHeight:0)},splitData:function(){var e=this.cloneConfig.page&&this.cloneConfig.page.pageIndex||1,t=this.cloneConfig.page&&this.cloneConfig.page.pageSize||15,n=this.config.tableData.length>t?t:this.config.tableData.length;this.cloneConfig.tableData=this.config.tableData.slice((e-1)*t,(e-1)*t+n),this.config.page&&(this.cloneConfig.page.total=this.config.tableData.length)},init:function(){"undefined"===typeof this.config.fetchUrl&&this.config.page?(this.cloneConfig=Object(l["a"])(this.config),this.splitData()):this.cloneConfig=Object(l["b"])(this.config,this.cloneConfig),this.loading&&(this.innerLoading=this.loading)}},created:function(){this.init(),this.getLayout()},mounted:function(){}},r=c,f=(n("190f"),n("2877")),g=Object(f["a"])(r,i,o,!1,null,"7fae086a",null);t["a"]=g.exports}}]);