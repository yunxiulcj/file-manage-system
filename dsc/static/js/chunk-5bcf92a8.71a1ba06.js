(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bcf92a8"],{1293:function(t,a,i){"use strict";i("f2d1")},"6a9c":function(t,a,i){},"75ba":function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"pageBox"},[i("el-header",{staticStyle:{height:"25px","line-height":"25px"}},[i("i",{class:"iconfont icon-"+t.icon}),i("span",{staticClass:"title"},[t._v(t._s(t.title))]),i("div",{staticClass:"headBtn"},[t._t("headBtn")],2)]),i("el-divider"),i("el-container",[t.aside?i("el-aside",{staticStyle:{"border-right":"0.5px solid #d9d9d9"},attrs:{width:t.asideWidth||"185px"}},[t._t("aside")],2):t._e(),i("el-main",[t._t("default")],2)],1)],1)},l=[],s={name:"pageFrame",props:["aside","title","icon","asideWidth"],data:function(){return{}},created:function(){},methods:{}},o=s,n=(i("1293"),i("2877")),r=Object(n["a"])(o,e,l,!1,null,"4bf95040",null);a["a"]=r.exports},ac99:function(t,a,i){"use strict";i("6a9c")},e87a:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"box"},[i("page-frame",{attrs:{title:"新建下载申请",icon:"fileDownload"},scopedSlots:t._u([{key:"headBtn",fn:function(){return[i("div",{staticClass:"goBack",on:{click:t.goBack}},[i("i",{staticClass:"el-icon-back"}),i("span",[t._v("返回上一级")])])]},proxy:!0}])},[i("div",{staticClass:"apply"},[i("div",{staticClass:"applyForm"},[i("el-form",{ref:"applyForm",staticStyle:{width:"95%"},attrs:{"label-width":"100px","label-position":"right",size:"small"}},[i("el-form-item",{attrs:{label:"申请人"}},[i("div",{staticClass:"applyUser"},[t._v(t._s(t.applyForm.applyUser))])]),i("el-form-item",{attrs:{label:"申请人邮箱"}},[i("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.applyForm.applyEmail,callback:function(a){t.$set(t.applyForm,"applyEmail",a)},expression:"applyForm.applyEmail"}})],1),i("el-form-item",{attrs:{label:"主题"}},[i("el-input",{attrs:{placeholder:"请输入主题"},model:{value:t.applyForm.applyTheme,callback:function(a){t.$set(t.applyForm,"applyTheme",a)},expression:"applyForm.applyTheme"}})],1),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入申请描述"},model:{value:t.applyForm.describe,callback:function(a){t.$set(t.applyForm,"describe",a)},expression:"applyForm.describe"}})],1),i("el-form-item",{attrs:{label:"文件"}},[i("div",{staticClass:"fileWrap"},t._l(t.applyForm.fileList,(function(a,e){return i("div",{key:a.fileName,staticClass:"fileBox"},[i("span",{staticClass:"fileName"},[t._v(t._s(a.fileName))]),i("span",{staticClass:"fileSize"},[t._v(t._s(a.size))]),i("i",{staticClass:"el-icon-close",on:{click:function(a){return t.delFile(e)}}}),e+1!=t.applyForm.fileList.length?i("el-divider",{attrs:{direction:"vertical"}}):t._e()],1)})),0),i("div",{staticClass:"addFile",on:{click:function(a){return t.getFileList()}}},[i("i",{staticClass:"el-icon-plus"}),i("span",[t._v("添加文件")])])]),i("el-form-item",{attrs:{label:"审批人"}},[i("div",{staticClass:"member"},[i("div",{staticClass:"content"},[t._l(t.applyForm.approvalUserList,(function(a){return[i("div",{key:a},[i("div",{staticClass:"memberBox"},[i("div",{staticClass:"iconBox"},[i("i",{staticClass:"iconfont icon-yonghutianchong"})]),i("span",[t._v(t._s(a))])])])]}))],2)])])],1)],1),i("div",{staticClass:"seniorWrap"},[i("div",{staticClass:"senior"},[i("div",{staticClass:"seniorTitle"},[t._v("高级选项")]),i("div",{staticClass:"seniorItem"},[i("el-checkbox",{model:{value:t.applyForm.isPeriodValidity,callback:function(a){t.$set(t.applyForm,"isPeriodValidity",a)},expression:"applyForm.isPeriodValidity"}},[t._v(" 文件下载有效期 ")]),i("div",{staticClass:"seniorContent"},[t._v(" 审批通过后 "),i("el-input-number",{staticStyle:{width:"100px","margin-left":"25px","margin-right":"10px"},attrs:{"controls-position":"right",min:1,size:"mini"},model:{value:t.applyForm.downloadDay,callback:function(a){t.$set(t.applyForm,"downloadDay",a)},expression:"applyForm.downloadDay"}}),t._v(" 天内有效 ")],1)],1),i("div",{staticClass:"seniorItem"},[i("el-checkbox",{model:{value:t.applyForm.isDownloads,callback:function(a){t.$set(t.applyForm,"isDownloads",a)},expression:"applyForm.isDownloads"}},[t._v(" 总下载次数 ")]),i("div",{staticClass:"seniorContent"},[t._v(" 文件下载次数 "),i("el-input-number",{staticStyle:{width:"100px",margin:"0px 10px"},attrs:{"controls-position":"right",min:1,size:"mini"},model:{value:t.applyForm.downloadCount,callback:function(a){t.$set(t.applyForm,"downloadCount",a)},expression:"applyForm.downloadCount"}}),t._v(" 单位：次 ")],1)],1)]),i("div",{staticClass:"btnWrap"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.addDownloadApply(t.applyForm)}}},[t._v(" 确定 ")]),i("el-button",{attrs:{type:"info",size:"small"},on:{click:t.goBack}},[t._v("取消")])],1)])])]),i("el-dialog",{attrs:{visible:t.showFileDialog,width:"60%"},on:{"update:visible":function(a){t.showFileDialog=a}}},[i("template",{slot:"title"},[i("div",{staticStyle:{height:"20px","line-height":"20px","border-left":"4px solid #1890ff","padding-left":"10px"}},[t._v(" 添加文件 ")])]),i("div",{staticClass:"breadCrumbBox"},[i("bread-crumb",{on:{startGetData:t.startGetData},model:{value:t.nowPath,callback:function(a){t.nowPath=a},expression:"nowPath"}})],1),i("div",{staticClass:"tableWrap"},[i("table-temp",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"table",attrs:{config:t.tableConfig},on:{"selection-change":t.handleSelectionChange},scopedSlots:t._u([{key:"file",fn:function(a){return[i("span",{class:{clickable:a.row.dir},on:{click:function(i){a.row.dir&&t.getData(a.row.path)}}},[t._v(" "+t._s(a.row.name)+" ")])]}}])})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(a){t.showFileDialog=!1}}},[t._v(" 取 消 ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addFile}},[t._v(" 确 定 ")])],1)],2),i("el-dialog",{attrs:{visible:t.tipsDialog,width:"450px"},on:{"update:visible":function(a){t.tipsDialog=a}}},[i("div",{staticClass:"tipsWrap"},[i("i",{staticClass:"el-icon-success"}),i("div",{staticClass:"label"},[t._v("文件下载申请成功")]),i("div",[t._v(" 点击调度编号 "),i("span",{staticClass:"applyId",on:{click:function(a){return t.jumpDetail(t.tipInfo)}}},[t._v(" dsfsdfsdfsd214235435 ")]),t._v(" 查看调度结果 ")])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(a){t.tipsDialog=!1}}},[t._v("关 闭")])],1)])],1)},l=[],s=(i("a434"),i("d3b7"),i("d81d"),i("b0c0"),i("4de4"),i("75ba")),o=i("8efb"),n=i("2c4e"),r=i("b8f0"),p={name:"newOrEditApply",components:{pageFrame:s["a"],tableTemp:o["a"],breadCrumb:n["a"]},props:[],data:function(){return{tipInfo:"",tipsDialog:!1,nowPath:"/",isDownloads:!1,isPeriodValidity:!1,showFileDialog:!1,tableLoading:!1,type:0,applyForm:{applyUser:"",applyEmail:"",applyTheme:"",describe:"",applyType:1,downloadDay:1,downloadCount:1,fileList:[],approvalUserList:[]},tableConfig:{tableData:[],maxHeight:"550px",selection:!0,border:!1,tableSetting:[{prop:"name",label:"文件名",slot:"file"},{prop:"size",label:"大小",formatter:function(t){return t.dir?"-":Object(r["d"])(t.size)}},{prop:"lastModified",label:"修改日期"}],condition:{path:""},fetchUrl:"getFileList"},approvalMode:{1:"会签",2:"或签",3:"依次审批"},levelObj:{1:"直接上级",2:"第二级上级",3:"第三级上级",4:"第四级上级",5:"第五级上级",6:"第六级上级"},selectFiles:[],rootPath:""}},created:function(){var t=this,a=this.$route.params;this.applyTitle=0==a.type?"新建下载申请":"编辑下载申请",this.$nextTick((function(){t.applyForm=t.initForm(a.data),t.type=a.type}))},mounted:function(){this.getCurrentApprovalUser()},methods:{jumpDetail:function(t){this.$router.push({name:"approval",params:{accountType:"2",approvalState:2,applyId:t}})},startGetData:function(t){t&&this.getData(this.nowPath)},goBack:function(){this.$router.go(-1)},delFile:function(t){this.applyForm.fileList.splice(t,1)},getData:function(t){var a,i=this;this.tableLoading=!0,a=t?"/"==t[t.length-1]?t:t+"/":"/",this.$http("getFileList",{path:a}).then((function(t){i.tableConfig.tableData=t.data,i.nowPath=a})).finally((function(){i.tableLoading=!1}))},addFile:function(){var t=this.selectFiles.map((function(t){return{fileSize:t.size,size:Object(r["d"])(t.size),filePath:t.path,fileName:t.name}}));this.$set(this.applyForm,"fileList",t),this.showFileDialog=!1},getFileList:function(){this.showFileDialog=!0,this.getData("/")},addDownloadApply:function(t){this.tipsDialog=!0,console.log(t)},handleSelectionChange:function(t){this.selectFiles=t.filter((function(t){if(!t.dir)return t}))},initForm:function(t){return t},getCurrentApprovalUser:function(){var t=this;this.$http("getCurrentApprovalUser").then((function(a){t.applyForm.approvalUserList=a.data}))}}},c=p,d=(i("ac99"),i("2877")),u=Object(d["a"])(c,e,l,!1,null,"5891edcc",null);a["default"]=u.exports},f2d1:function(t,a,i){}}]);