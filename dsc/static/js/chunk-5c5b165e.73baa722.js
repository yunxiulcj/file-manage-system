(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c5b165e"],{"0e09":function(e,t,n){},1276:function(e,t,n){"use strict";var a=n("2ba4"),i=n("c65b"),o=n("e330"),l=n("d784"),s=n("44e7"),r=n("825a"),c=n("1d80"),p=n("4840"),f=n("8aa5"),g=n("50c4"),u=n("577e"),h=n("dc4a"),d=n("4dae"),m=n("14c3"),b=n("9263"),y=n("9f7f"),C=n("d039"),v=y.UNSUPPORTED_Y,x=4294967295,w=Math.min,S=[].push,k=o(/./.exec),D=o(S),T=o("".slice),$=!C((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));l("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=u(c(this)),l=void 0===n?x:n>>>0;if(0===l)return[];if(void 0===e)return[o];if(!s(e))return i(t,o,e,l);var r,p,f,g=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,y=new RegExp(e.source,h+"g");while(r=i(b,y,o)){if(p=y.lastIndex,p>m&&(D(g,T(o,m,r.index)),r.length>1&&r.index<o.length&&a(S,g,d(r,1)),f=r[0].length,m=p,g.length>=l))break;y.lastIndex===r.index&&y.lastIndex++}return m===o.length?!f&&k(y,"")||D(g,""):D(g,T(o,m)),g.length>l?d(g,0,l):g}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:i(t,this,e,n)}:t,[function(t,n){var a=c(this),l=void 0==t?void 0:h(t,e);return l?i(l,t,a,n):i(o,u(a),t,n)},function(e,a){var i=r(this),l=u(e),s=n(o,i,l,a,o!==t);if(s.done)return s.value;var c=p(i,RegExp),h=i.unicode,d=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(v?"g":"y"),b=new c(v?"^(?:"+i.source+")":i,d),y=void 0===a?x:a>>>0;if(0===y)return[];if(0===l.length)return null===m(b,l)?[l]:[];var C=0,S=0,k=[];while(S<l.length){b.lastIndex=v?0:S;var $,I=m(b,v?T(l,S):l);if(null===I||($=w(g(b.lastIndex+(v?S:0)),l.length))===C)S=f(l,S,h);else{if(D(k,T(l,C,S)),k.length===y)return k;for(var _=1;_<=I.length-1;_++)if(D(k,I[_]),k.length===y)return k;S=C=$}}return D(k,T(l,C)),k}]}),!$,v)},1293:function(e,t,n){"use strict";n("f2d1")},"190f":function(e,t,n){"use strict";n("0e09")},"75ba":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pageBox"},[n("el-header",{staticStyle:{height:"25px","line-height":"25px"}},[n("i",{class:"iconfont icon-"+e.icon}),n("span",{staticClass:"title"},[e._v(e._s(e.title))]),n("div",{staticClass:"headBtn"},[e._t("headBtn")],2)]),n("el-divider"),n("el-container",[e.aside?n("el-aside",{staticStyle:{"border-right":"0.5px solid #d9d9d9"},attrs:{width:e.asideWidth||"185px"}},[e._t("aside")],2):e._e(),n("el-main",[e._t("default")],2)],1)],1)},i=[],o={name:"pageFrame",props:["aside","title","icon","asideWidth"],data:function(){return{}},created:function(){},methods:{}},l=o,s=(n("1293"),n("2877")),r=Object(s["a"])(l,a,i,!1,null,"4bf95040",null);t["a"]=r.exports},"8efb":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"tableTempWrap",staticClass:"table-temp"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.innerLoading,expression:"innerLoading"}],ref:"elTable",staticClass:"farm-table-temp",attrs:{"max-height":e.cloneConfig.maxHeight,loadingText:"正在加载表格数据","empty-text":e.emptyText,data:e.cloneConfig.tableData,"header-cell-style":e.cloneConfig.headerCellStyle,border:e.cloneConfig.border,"row-key":e.cloneConfig.rowKey,lazy:"","default-sort":e.cloneConfig.defaultSort,load:e.cloneConfig.loadFn,stripe:"undefined"==typeof e.cloneConfig.stripe||e.cloneConfig.stripe,size:"small"},on:{"row-click":e.rowClick,"expand-change":e.expandChange,"selection-change":e.handleSelectionChange,"sort-change":e.handleSortChange,"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"cell-click":e.cellClick,toggleRowSelection:e.toggleRowSelection}},[e.cloneConfig.selection?n("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}):e._e(),e.cloneConfig.serialNumber?n("el-table-column",{attrs:{type:"index",align:"center",width:"55"}}):e._e(),e.cloneConfig.expand?n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("expand",null,{row:t.row,index:t.$index})]}}],null,!0)}):e._e(),e._l(e.cloneConfig.tableSetting,(function(t,a){return n("el-table-column",{key:a,staticClass:"column",attrs:{label:t.label,prop:t.prop,align:t.align||"center","min-width":t.minWidth||120,width:t.width,fixed:t.fixed,"show-overflow-tooltip":"",filters:t.filters,"filter-method":t.filterMethod,sortable:t.sortable||!1},scopedSlots:e._u([{key:"default",fn:function(i){return[e._t(t.slot,(function(){return[n("span",{directives:[{name:"show",rawName:"v-show",value:"function"===typeof t.show?t.show(i.row):!1!==t.show,expression:"\n              typeof item.show === 'function'\n                ? item.show(scope.row)\n                : item.show === false\n                ? false\n                : true\n            "}],style:t.style?"function"===typeof t.style?t.style(i.row):t.style:{},attrs:{title:t.title},on:{click:function(e){!t.click||("function"===typeof t.click?t.click(i.row):t.click)}}},[e._v(" "+e._s("function"===typeof t.formatter?t.formatter(i.row,i.column,i.row[t.prop],a):i.row[t.prop])+" ")])]}),{row:i.row})]}}],null,!0)})})),e.cloneConfig.operation?n("el-table-column",{attrs:{align:"center",fixed:e.cloneConfig.operation.fixed||"right",label:e.cloneConfig.operation.label||"操作","min-width":e.cloneConfig.operation.minWidth||150,width:e.cloneConfig.operation.width},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("btn",(function(){return e._l(e.cloneConfig.operation.btns,(function(a,i){return n("el-button",{directives:[{name:"show",rawName:"v-show",value:"function"===typeof a.show?a.show(t.row):!1!==a.show,expression:"\n              typeof item.show === 'function'\n                ? item.show(scope.row)\n                : item.show === false\n                ? false\n                : true\n            "}],key:i,attrs:{disabled:!!a.disabled&&("function"===typeof a.disabled?a.disabled(t.row):!1!==a.disabled),size:a.size||"mini",type:a.type||"text"},on:{click:function(e){return a.fn(t.row)}}},[a.href?n("a",{style:"function"===typeof a.style?a.style(t.row):a.style,attrs:{href:a.href}},[e._v(" "+e._s("function"===typeof a.label?a.label(t.row):a.label)+" ")]):n("span",{style:"function"===typeof a.style?a.style(t.row):a.style},[e._v(" "+e._s("function"===typeof a.label?a.label(t.row):a.label)+" ")])])}))}),{row:t.row})]}}],null,!0)}):e._e()],2),e.cloneConfig.page?n("div",{ref:"reportNav",staticClass:"report-nav"},[n("el-pagination",{attrs:{"current-page":e.cloneConfig.page.pageIndex,"page-size":e.cloneConfig.page.pageSize,"page-sizes":e.cloneConfig.page.pageSizes,layout:e.layout,total:e.cloneConfig.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.cloneConfig.page,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.cloneConfig.page,"pageIndex",t)}}})],1):e._e()],1)},i=[],o=n("5530"),l=(n("d81d"),n("d3b7"),n("ac1f"),n("1276"),n("fb6a"),n("b8f0")),s=n("5c96"),r={name:"TableTemp",props:Object(o["a"])({config:{type:Object,require:!0},loading:{type:Boolean,default:!1}},s["Table"].props),watch:{"config.tableData":function(){this.init()}},data:function(){return{sortAble:!1,responseData:null,showSelectList:!1,cloneConfig:{map:{data:"data.items",total:"data.total"},resetIndex:!0},layout:"prev, pager, next, jumper",clientMaxHeight:200,isSizeOrIndexChange:!1,innerLoading:!1}},methods:{handleSortChange:function(e){this.sortAble=!0,this.$emit("sortChange",e)},cellMouseEnter:function(e){this.$emit("cellMouseEnter",e)},cellMouseLeave:function(e){this.$emit("cellMouseLeave",e)},toggleRowSelection:function(e){this.$emit("toggleRowSelection",e)},cellClick:function(e,t,n){this.$emit("cellClick",e,t,n)},getLayout:function(){this.cloneConfig.page&&this.cloneConfig.page.pageSizes&&(this.layout="sizes, "+this.layout),this.cloneConfig.page&&(0===this.cloneConfig.page.total||this.cloneConfig.page.total)&&(this.layout="total, "+this.layout)},handleSelectionChange:function(e){this.$emit("selection-change",e)},handleSizeChange:function(e){this.cloneConfig.page&&(this.cloneConfig.page.pageSize=e,this.cloneConfig.page.pageIndex=1,this.isSizeOrIndexChange=!0),"undefined"!==this.cloneConfig.fetchUrl?this.fetch():this.splitData()},handleCurrentChange:function(e){this.cloneConfig.page&&(this.cloneConfig.page.pageIndex=e,this.isSizeOrIndexChange=!0),"undefined"!==this.cloneConfig.fetchUrl?this.fetch():this.splitData()},fetch:function(e){var t,n,a=this;if(this.cloneConfig.fetchUrl)try{!this.cloneConfig.resetIndex&&this.sortAble||this.resetIndex();var i=Object(o["a"])({},this.cloneConfig.condition);if(this.cloneConfig.page){var l="pageSize",s="pageIndex";this.cloneConfig.page.map&&(l=this.cloneConfig.page.map.size||"pageSize",s=this.cloneConfig.page.map.index||"pageIndex"),i[l]=this.cloneConfig.page.pageSize||15,i[s]=this.cloneConfig.page.pageIndex||1}this.innerLoading=!0,this.$emit("update:loading",!0),void 0!=e&&"get"==e&&(i.methodName=e),this.cloneConfig.map&&this.cloneConfig.map.ContentType?(t=this.cloneConfig.map.ContentType,n=this.$http(this.config.fetchUrl,i,{headers:{"Content-Type":t}})):n=this.$http(this.config.fetchUrl,i),n.then((function(e){a.responseData=e;var t=a.dataMap(e,a.cloneConfig.map.data)||[];if(a.cloneConfig.dataProcess&&(t=a.cloneConfig.dataProcess(t)),a.cloneConfig.tableData=t,a.config.tableData=t,a.config.page&&(0===a.config.page.total||a.config.page.total)){var n=a.dataMap(e,a.cloneConfig.map.total)||0;a.cloneConfig.page&&a.$set(a.cloneConfig.page,"total",n)}}),(function(){a.clearData()})).finally((function(){a.$emit("afterFetch",a.responseData),a.$emit("update:loading",!1),a.innerLoading=!1})),this.sortAble=!1}catch(r){this.innerLoading=!1,this.$emit("update:loading",!1),console.log("%c%s","color: red",r)}else console.log("%c没有fetchUrl，请检查","color: red")},clearData:function(){this.cloneConfig.tableData=[],this.cloneConfig.page&&(this.cloneConfig.page.pageIndex=1)&&(this.cloneConfig.page.total=0)},dataMap:function(e,t){try{var n=t.split("."),a=Object(l["a"])(e);while(n.length>0)a=a[n.shift()];return a}catch(i){console.log("数据映射出错%c%s","color: red",i)}},rowClick:function(e,t,n){this.$emit("row-click",e,t,n)},expandChange:function(e,t){this.$emit("expand-change",e,t)},resetIndex:function(){this.cloneConfig.page&&!this.isSizeOrIndexChange?(this.$set(this.cloneConfig.page,"pageIndex",1),this.isSizeOrIndexChange=!1):this.isSizeOrIndexChange=!1},getMaxHeight:function(){var e=this.$refs.tableTempWrap,t=this.$refs.reportNav;this.clientMaxHeight=e.clientHeight-(t?t.offsetHeight:0)},splitData:function(){var e=this.cloneConfig.page&&this.cloneConfig.page.pageIndex||1,t=this.cloneConfig.page&&this.cloneConfig.page.pageSize||15,n=this.config.tableData.length>t?t:this.config.tableData.length;this.cloneConfig.tableData=this.config.tableData.slice((e-1)*t,(e-1)*t+n),this.config.page&&(this.cloneConfig.page.total=this.config.tableData.length)},init:function(){"undefined"===typeof this.config.fetchUrl&&this.config.page?(this.cloneConfig=Object(l["a"])(this.config),this.splitData()):this.cloneConfig=Object(l["b"])(this.config,this.cloneConfig),this.loading&&(this.innerLoading=this.loading)}},created:function(){this.init(),this.getLayout()},mounted:function(){}},c=r,p=(n("190f"),n("2877")),f=Object(p["a"])(c,a,i,!1,null,"7fae086a",null);t["a"]=f.exports},b809:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("page-frame",{attrs:{title:"我的申请",icon:"myApplication"}},[n("el-form",{attrs:{inline:"",size:"small"}},[n("el-form-item",{attrs:{label:"审批状态"}},[n("el-select",{model:{value:e.tableConfig.condition.applyStatus,callback:function(t){e.$set(e.tableConfig.condition,"applyStatus",t)},expression:"tableConfig.condition.applyStatus"}},e._l(e.stateList,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1),n("el-form-item",[n("el-input",{attrs:{placeholder:"请输入工单号",clear:""},model:{value:e.tableConfig.condition.searchStr,callback:function(t){e.$set(e.tableConfig.condition,"searchStr",t)},expression:"tableConfig.condition.searchStr"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("查询")])],1)],1),n("table-temp",{ref:"table",attrs:{config:e.tableConfig,loading:e.tableLoading}})],1),n("el-dialog",{attrs:{visible:e.MultiFileDialog,width:"60%"},on:{"update:visible":function(t){e.MultiFileDialog=t}}},[n("template",{slot:"title"},[n("div",{staticStyle:{height:"20px","line-height":"20px","border-left":"4px solid #1890ff","padding-left":"10px"}},[e._v(" 文件夹 ")])]),n("table-temp",{attrs:{config:e.MultiFileConfig,loading:e.tableLoading1}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.MultiFileDialog=!1}}},[e._v(" 关 闭 ")])],1)],2)],1)},i=[],o=(n("d3b7"),n("75ba")),l=n("8efb"),s=n("c1df"),r=n.n(s),c=n("b8f0"),p={name:"myApplication",components:{pageFrame:o["a"],tableTemp:l["a"]},data:function(){var e=this;return{MultiFileDialog:!1,tableLoading1:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},tableLoading:!1,times:[],stateList:[{label:"全部",value:""},{label:"已撤回",value:"1"},{label:"待处理",value:"2"},{label:"审批中",value:"3"},{label:"审批通过",value:"4"},{label:"审批拒绝",value:"5"},{label:"传输异常",value:"6"}],approvalData:{file:[],applyTime:"",applyState:"",workOrderNum:"",applyUser:"",department:"",invalidDay:"",describe:"",processList:[{approvalUser:"",approvalState:"",describe:"",approvalTime:""}],receiver:"",receiverEmail:"",receiverTel:"",receiverCompany:"",approvalSuccessTime:""},tableConfig:{tableData:[],border:!0,tableSetting:[{prop:"applyId",label:"工单号"},{prop:"fileName",label:"文件名",style:function(e){return e.multiFile?{color:"#1890ff",cursor:"pointer"}:{color:"none"}},click:function(t){t.multiFile&&(e.$set(e.MultiFileConfig,"tableData",t.attachmentList),e.MultiFileDialog=!0)}},{prop:"applyType",label:"行为",formatter:function(e){var t;switch(e.applyType){case 1:t="文件下载申请";break;case 2:t="文件外发申请";break;case 3:t="文件下载申请";break;default:t="-";break}return t}},{prop:"applyTime",label:"申请时间"},{prop:"approvalTime",label:"审批时间"},{prop:"applyStatus",label:"申请结果",style:function(e){var t;switch(e.applyStatus){case 1:t={color:"#fd7e14"};break;case 2:case 3:t={color:"#228be6"};break;case 4:t={color:"#40c057"};break;case 5:t={color:"#f03e3e"};break;default:t={color:"#595959"};break}return t},formatter:function(e){var t;switch(e.applyStatus){case 1:t="已撤回";break;case 2:t="待处理";break;case 3:t="审批中";break;case 4:t="审批通过";break;case 5:t="审批拒绝";break;case 6:t="传输异常";break;default:t="-";break}return t}}],map:{data:"data.data",total:"data.totalCount"},condition:{applyStatus:"",startTime:"",endTime:"",searchStr:""},operation:{btns:[{label:"详情",type:"text",fn:function(t){e.$router.push({name:"approval",params:{accountType:"2",approvalState:t.applyStatus,applyId:t.applyId}})}},{label:"撤回",type:"text",fn:function(t){e.$confirm("是否撤回当前申请？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info",center:!0}).then((function(){e.$http("back",{applyId:t.applyId}).then((function(t){e.$message.success(t.errMsg),e.getData()}))}))},style:{color:"#fd7e14"},show:function(e){return 2==e.applyStatus}},{label:"删除",type:"text",show:function(e){return 1==e.applyStatus},fn:function(t){e.$confirm("是否删除该申请记录？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info",center:!0}).then((function(){e.$http("deleteApply",{applyId:t.applyId}).then((function(t){e.$message.success(t.errMsg),e.getData()}))}))}},{label:"编辑",type:"text",show:function(e){return 1==e.applyStatus},fn:function(t){var n={applyId:t.applyId,applyUser:localStorage.getItem("username")||"",applyType:1};e.$http("getApplyDetail",{applyId:t.applyId,type:"2"}).then((function(e){var t=e.data;n["applyEmail"]=t.applyEmail,n["applyTheme"]=t.applyTheme,n["describe"]=t.applyDesc,n["fileList"]=t.fileList,n["downloadDay"]=t.downloadDay,n["downloadCount"]=t.downloadCount,n["approvalUserList"]=t.approvalUserList})).finally((function(){e.$router.push({name:"newOrEditApply",params:{type:1,data:n}})}))}}]},page:{pageIndex:1,pageSize:10,pageSizes:[10,20,30,40],total:0,map:{index:"page",size:"pageSize"}},fetchUrl:"getApplyList"},MultiFileConfig:{border:!0,tableData:[],maxHeight:"400px",tableSetting:[{prop:"fileName",label:"文件名"},{prop:"fileSize",label:"文件大小",formatter:function(e){return Object(c["d"])(e.fileSize)}}]}}},computed:{},created:function(){this.getDefaultTime()},mounted:function(){this.getData()},methods:{getData:function(){var e=this;this.tableConfig.condition.startTime=this.times[0],this.tableConfig.condition.endTime=this.times[1],this.$nextTick((function(){e.$refs.table.fetch()}))},getDefaultTime:function(){this.times=[r()().subtract(7,"days").format("YYYY-MM-DD HH:mm:ss"),r()().format("YYYY-MM-DD HH:mm:ss")]}}},f=p,g=n("2877"),u=Object(g["a"])(f,a,i,!1,null,"152f0b4a",null);t["default"]=u.exports},f2d1:function(e,t,n){}}]);